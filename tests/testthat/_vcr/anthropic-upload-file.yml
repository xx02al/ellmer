http_interactions:
- request:
    method: POST
    uri: https://api.anthropic.com/v1/files
    body:
      fields:
        file:
          path: /Users/hadleywickham/Documents/llms/elmer/tests/testthat/apples.pdf
          type: application/pdf
          name: ~
  response:
    status: 200
    headers:
      date: Thu, 06 Nov 2025 23:03:21 GMT
      content-type: application/json
      content-encoding: gzip
      request-id: req_011CUsUFF7yzZqXSTWCuTx6a
      strict-transport-security: max-age=31536000; includeSubDomains; preload
      anthropic-organization-id: bf3687d8-1b59-41eb-9761-a1fd70b24e7e
      x-envoy-upstream-service-time: '362'
      cf-cache-status: DYNAMIC
      x-robots-tag: none
      server: cloudflare
      cf-ray: 99a839453e7169d9-DFW
    body:
      string: '{"type":"file","id":"file_011CUsUFFEvkR1SQeD4LEdRJ","size_bytes":14560,"created_at":"2025-11-06T23:03:21.228000Z","filename":"apples.pdf","mime_type":"application/pdf","downloadable":false}'
  recorded_at: 2025-11-06 23:03:21
- request:
    method: POST
    uri: https://api.anthropic.com/v1/messages
    body:
      string: '{"model":"claude-sonnet-4-5-20250929","messages":[{"role":"user","content":[{"type":"text","text":"What''s
        the title of this document?"},{"type":"document","source":{"type":"file","file_id":"file_011CUsUFFEvkR1SQeD4LEdRJ"},"cache_control":{"type":"ephemeral","ttl":"5m"}}]}],"stream":false,"temperature":0,"max_tokens":4096}'
  response:
    status: 200
    headers:
      date: Thu, 06 Nov 2025 23:03:24 GMT
      content-type: application/json
      content-encoding: gzip
      anthropic-ratelimit-input-tokens-limit: '2000000'
      anthropic-ratelimit-input-tokens-remaining: '2000000'
      anthropic-ratelimit-input-tokens-reset: '2025-11-06T23:03:24Z'
      anthropic-ratelimit-output-tokens-limit: '400000'
      anthropic-ratelimit-output-tokens-remaining: '400000'
      anthropic-ratelimit-output-tokens-reset: '2025-11-06T23:03:24Z'
      anthropic-ratelimit-requests-limit: '4000'
      anthropic-ratelimit-requests-remaining: '3999'
      anthropic-ratelimit-requests-reset: '2025-11-06T23:03:21Z'
      retry-after: '38'
      anthropic-ratelimit-tokens-limit: '2400000'
      anthropic-ratelimit-tokens-remaining: '2400000'
      anthropic-ratelimit-tokens-reset: '2025-11-06T23:03:24Z'
      request-id: req_011CUsUFHFE5eAe54qZgkKik
      strict-transport-security: max-age=31536000; includeSubDomains; preload
      anthropic-organization-id: bf3687d8-1b59-41eb-9761-a1fd70b24e7e
      x-envoy-upstream-service-time: '3227'
      cf-cache-status: DYNAMIC
      x-robots-tag: none
      server: cloudflare
      cf-ray: 99a839485b0369d9-DFW
    body:
      string: '{"model":"claude-sonnet-4-5-20250929","id":"msg_015jaDebvhcVVVmGEomt96nM","type":"message","role":"assistant","content":[{"type":"text","text":"The
        title of this document is **\"Apples are tasty\"**."}],"stop_reason":"end_turn","stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":0,"cache_read_input_tokens":1636,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":0},"output_tokens":19,"service_tier":"standard"}}'
  recorded_at: 2025-11-06 23:03:24
- request:
    method: POST
    uri: https://api.anthropic.com/v1/messages
    body:
      string: '{"model":"claude-sonnet-4-5-20250929","messages":[{"role":"user","content":[{"type":"text","text":"What''s
        the title of this document?"},{"type":"document","source":{"type":"file","file_id":"file_011CUsUFFEvkR1SQeD4LEdRJ"}}]},{"role":"assistant","content":[{"type":"text","text":"The
        title of this document is **\"Apples are tasty\"**."}]},{"role":"user","content":[{"type":"text","text":"What
        apple is not tasty? State only the name","cache_control":{"type":"ephemeral","ttl":"5m"}}]}],"stream":false,"temperature":0,"max_tokens":4096}'
  response:
    status: 200
    headers:
      date: Thu, 06 Nov 2025 23:03:28 GMT
      content-type: application/json
      content-encoding: gzip
      anthropic-ratelimit-input-tokens-limit: '2000000'
      anthropic-ratelimit-input-tokens-remaining: '2000000'
      anthropic-ratelimit-input-tokens-reset: '2025-11-06T23:03:28Z'
      anthropic-ratelimit-output-tokens-limit: '400000'
      anthropic-ratelimit-output-tokens-remaining: '400000'
      anthropic-ratelimit-output-tokens-reset: '2025-11-06T23:03:28Z'
      anthropic-ratelimit-requests-limit: '4000'
      anthropic-ratelimit-requests-remaining: '3999'
      anthropic-ratelimit-requests-reset: '2025-11-06T23:03:25Z'
      retry-after: '32'
      anthropic-ratelimit-tokens-limit: '2400000'
      anthropic-ratelimit-tokens-remaining: '2400000'
      anthropic-ratelimit-tokens-reset: '2025-11-06T23:03:28Z'
      request-id: req_011CUsUFXqa4GsE4rZAcPWT2
      strict-transport-security: max-age=31536000; includeSubDomains; preload
      anthropic-organization-id: bf3687d8-1b59-41eb-9761-a1fd70b24e7e
      x-envoy-upstream-service-time: '3398'
      cf-cache-status: DYNAMIC
      x-robots-tag: none
      server: cloudflare
      cf-ray: 99a8395dae6b69d9-DFW
    body:
      string: '{"model":"claude-sonnet-4-5-20250929","id":"msg_01Cc6yEtEQGcgeNhL9H64ysv","type":"message","role":"assistant","content":[{"type":"text","text":"Red
        delicious"}],"stop_reason":"end_turn","stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":0,"cache_read_input_tokens":1669,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":0},"output_tokens":6,"service_tier":"standard"}}'
  recorded_at: 2025-11-06 23:03:28
- request:
    method: POST
    uri: https://api.anthropic.com/v1/messages
    body:
      string: '{"model":"claude-sonnet-4-5-20250929","messages":[{"role":"user","content":[{"type":"text","text":"What''s
        the title of this document?"},{"type":"document","source":{"type":"file","file_id":"file_011CUsUFFEvkR1SQeD4LEdRJ"}}]},{"role":"assistant","content":[{"type":"text","text":"The
        title of this document is **\"Apples are tasty\"**."}]},{"role":"user","content":[{"type":"text","text":"What
        apple is not tasty? State only the name"}]},{"role":"assistant","content":[{"type":"text","text":"Red
        delicious"}]},{"role":"user","content":[{"type":"text","text":"What apple
        is not tasty? State only the name","cache_control":{"type":"ephemeral","ttl":"5m"}}]}],"stream":false,"temperature":0,"max_tokens":4096}'
  response:
    status: 200
    headers:
      date: Thu, 06 Nov 2025 23:03:31 GMT
      content-type: application/json
      content-encoding: gzip
      anthropic-ratelimit-input-tokens-limit: '2000000'
      anthropic-ratelimit-input-tokens-remaining: '2000000'
      anthropic-ratelimit-input-tokens-reset: '2025-11-06T23:03:31Z'
      anthropic-ratelimit-output-tokens-limit: '400000'
      anthropic-ratelimit-output-tokens-remaining: '400000'
      anthropic-ratelimit-output-tokens-reset: '2025-11-06T23:03:31Z'
      anthropic-ratelimit-requests-limit: '4000'
      anthropic-ratelimit-requests-remaining: '3999'
      anthropic-ratelimit-requests-reset: '2025-11-06T23:03:28Z'
      retry-after: '29'
      anthropic-ratelimit-tokens-limit: '2400000'
      anthropic-ratelimit-tokens-remaining: '2400000'
      anthropic-ratelimit-tokens-reset: '2025-11-06T23:03:31Z'
      request-id: req_011CUsUFoPTDfm9QMogb4TVd
      strict-transport-security: max-age=31536000; includeSubDomains; preload
      anthropic-organization-id: bf3687d8-1b59-41eb-9761-a1fd70b24e7e
      x-envoy-upstream-service-time: '2965'
      cf-cache-status: DYNAMIC
      x-robots-tag: none
      server: cloudflare
      cf-ray: 99a83974787069d9-DFW
    body:
      string: '{"model":"claude-sonnet-4-5-20250929","id":"msg_01QS7E8kH1zo7WD52U4MNdvg","type":"message","role":"assistant","content":[{"type":"text","text":"Red
        delicious"}],"stop_reason":"end_turn","stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":0,"cache_read_input_tokens":1689,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":0},"output_tokens":6,"service_tier":"standard"}}'
  recorded_at: 2025-11-06 23:03:31
- request:
    method: GET
    uri: https://api.anthropic.com/v1/files/file_011CUsUFFEvkR1SQeD4LEdRJ/content
  response:
    status: 400
    headers:
      date: Thu, 06 Nov 2025 23:03:32 GMT
      content-type: application/json
      content-length: '170'
      cf-ray: 99a839882f4269d9-DFW
      x-should-retry: 'false'
      request-id: req_011CUsUG2vntyrm8FUm3CP81
      strict-transport-security: max-age=31536000; includeSubDomains; preload
      anthropic-organization-id: bf3687d8-1b59-41eb-9761-a1fd70b24e7e
      x-envoy-upstream-service-time: '75'
      cf-cache-status: DYNAMIC
      x-robots-tag: none
      server: cloudflare
    body:
      string: '{"type":"error","error":{"type":"invalid_request_error","message":"File
        ''file_011CUsUFFEvkR1SQeD4LEdRJ'' is not downloadable"},"request_id":"req_011CUsUG2vntyrm8FUm3CP81"}'
  recorded_at: 2025-11-06 23:03:31
- request:
    method: GET
    uri: https://api.anthropic.com/v1/files
  response:
    status: 200
    headers:
      date: Thu, 06 Nov 2025 23:03:32 GMT
      content-type: application/json
      content-encoding: gzip
      request-id: req_011CUsUG3cxV29tsWtZdP2sD
      strict-transport-security: max-age=31536000; includeSubDomains; preload
      anthropic-organization-id: bf3687d8-1b59-41eb-9761-a1fd70b24e7e
      x-envoy-upstream-service-time: '104'
      cf-cache-status: DYNAMIC
      x-robots-tag: none
      server: cloudflare
      cf-ray: 99a839894b7769d9-DFW
    body:
      string: '{"data":[{"type":"file","id":"file_011CUsUFFEvkR1SQeD4LEdRJ","size_bytes":14560,"created_at":"2025-11-06T23:03:21.228000Z","filename":"apples.pdf","mime_type":"application/pdf","downloadable":false},{"type":"file","id":"file_011CUsToD2kzLe1fexsvUrZ1","size_bytes":14560,"created_at":"2025-11-06T22:57:27.998000Z","filename":"apples.pdf","mime_type":"application/pdf","downloadable":false}],"has_more":false,"first_id":"file_011CUsUFFEvkR1SQeD4LEdRJ","last_id":"file_011CUsToD2kzLe1fexsvUrZ1"}'
  recorded_at: 2025-11-06 23:03:32
- request:
    method: DELETE
    uri: https://api.anthropic.com/v1/files/file_011CUsUFFEvkR1SQeD4LEdRJ
  response:
    status: 200
    headers:
      date: Thu, 06 Nov 2025 23:03:32 GMT
      content-type: application/json
      content-encoding: gzip
      request-id: req_011CUsUG4Q6JAFL5dZLr8MyJ
      strict-transport-security: max-age=31536000; includeSubDomains; preload
      anthropic-organization-id: bf3687d8-1b59-41eb-9761-a1fd70b24e7e
      x-envoy-upstream-service-time: '467'
      cf-cache-status: DYNAMIC
      x-robots-tag: none
      server: cloudflare
      cf-ray: 99a8398a7fcf69d9-DFW
    body:
      string: '{"id":"file_011CUsUFFEvkR1SQeD4LEdRJ","type":"file_deleted"}'
  recorded_at: 2025-11-06 23:03:32
recorded_with: VCR-vcr/2.0.0
