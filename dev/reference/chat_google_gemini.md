# Chat with a Google Gemini or Vertex AI model

Google's AI offering is broken up into two parts: Gemini and Vertex AI.
Most enterprises are likely to use Vertex AI, and individuals are likely
to use Gemini.

Use
[`google_upload()`](https://ellmer.tidyverse.org/dev/reference/google_upload.md)
to upload files (PDFs, images, video, audio, etc.)

### Authentication

These functions try a number of authentication strategies, in this
order:

- An API key set in the `GOOGLE_API_KEY` env var, or, for
  `chat_google_gemini()` only, `GEMINI_API_KEY`.

- Google's default application credentials, if the gargle package is
  installed.

- Viewer-based credentials on Posit Connect, if the connectcreds
  package.

- **\[experimental\]**. An browser-based OAuth flow, if you're in an
  interactive session. This currently uses an unverified OAuth app (so
  you will get a scary warning); we plan to verify in the near future.

## Usage

``` r
chat_google_gemini(
  system_prompt = NULL,
  base_url = "https://generativelanguage.googleapis.com/v1beta/",
  api_key = NULL,
  credentials = NULL,
  model = NULL,
  params = NULL,
  api_args = list(),
  api_headers = character(),
  echo = NULL
)

chat_google_vertex(
  location,
  project_id,
  system_prompt = NULL,
  model = NULL,
  params = NULL,
  api_args = list(),
  api_headers = character(),
  echo = NULL
)

models_google_gemini(
  base_url = "https://generativelanguage.googleapis.com/v1beta/",
  api_key = NULL,
  credentials = NULL
)

models_google_vertex(location, project_id, credentials = NULL)
```

## Arguments

- system_prompt:

  A system prompt to set the behavior of the assistant.

- base_url:

  The base URL to the endpoint; the default is OpenAI's public API.

- api_key:

  **\[deprecated\]** Use `credentials` instead.

- credentials:

  A function that returns a list of authentication headers or `NULL`,
  the default, to use ambient credentials. See above for details.

- model:

  The model to use for the chat (defaults to "gemini-2.5-flash"). We
  regularly update the default, so we strongly recommend explicitly
  specifying a model for anything other than casual use. Use
  `models_google_gemini()` to see all options.

- params:

  Common model parameters, usually created by
  [`params()`](https://ellmer.tidyverse.org/dev/reference/params.md).

- api_args:

  Named list of arbitrary extra arguments appended to the body of every
  chat API call. Combined with the body object generated by ellmer with
  [`modifyList()`](https://rdrr.io/r/utils/modifyList.html).

- api_headers:

  Named character vector of arbitrary extra headers appended to every
  chat API call.

- echo:

  One of the following options:

  - `none`: don't emit any output (default when running in a function).

  - `output`: echo text and tool-calling output as it streams in
    (default when running at the console).

  - `all`: echo all input and output.

  Note this only affects the
  [`chat()`](https://ellmer.tidyverse.org/dev/reference/chat-any.md)
  method.

- location:

  Location, e.g. `us-east1`, `me-central1`, `africa-south1` or `global`.

- project_id:

  Project ID.

## Value

A [Chat](https://ellmer.tidyverse.org/dev/reference/Chat.md) object.

## See also

Other chatbots:
[`chat_anthropic()`](https://ellmer.tidyverse.org/dev/reference/chat_anthropic.md),
[`chat_aws_bedrock()`](https://ellmer.tidyverse.org/dev/reference/chat_aws_bedrock.md),
[`chat_azure_openai()`](https://ellmer.tidyverse.org/dev/reference/chat_azure_openai.md),
[`chat_cloudflare()`](https://ellmer.tidyverse.org/dev/reference/chat_cloudflare.md),
[`chat_databricks()`](https://ellmer.tidyverse.org/dev/reference/chat_databricks.md),
[`chat_deepseek()`](https://ellmer.tidyverse.org/dev/reference/chat_deepseek.md),
[`chat_github()`](https://ellmer.tidyverse.org/dev/reference/chat_github.md),
[`chat_groq()`](https://ellmer.tidyverse.org/dev/reference/chat_groq.md),
[`chat_huggingface()`](https://ellmer.tidyverse.org/dev/reference/chat_huggingface.md),
[`chat_mistral()`](https://ellmer.tidyverse.org/dev/reference/chat_mistral.md),
[`chat_ollama()`](https://ellmer.tidyverse.org/dev/reference/chat_ollama.md),
[`chat_openai()`](https://ellmer.tidyverse.org/dev/reference/chat_openai.md),
[`chat_openai_compatible()`](https://ellmer.tidyverse.org/dev/reference/chat_openai_compatible.md),
[`chat_openrouter()`](https://ellmer.tidyverse.org/dev/reference/chat_openrouter.md),
[`chat_perplexity()`](https://ellmer.tidyverse.org/dev/reference/chat_perplexity.md),
[`chat_portkey()`](https://ellmer.tidyverse.org/dev/reference/chat_portkey.md)

## Examples

``` r
if (FALSE) { # \dontrun{
chat <- chat_google_gemini()
chat$chat("Tell me three jokes about statisticians")
} # }
```
