<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • ellmer</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://ellmer.tidyverse.org/logo.png"><meta name="robots" content="noindex"><script defer data-domain="ellmer.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ellmer</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.3.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/ellmer.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/programming.html">Programming with ellmer</a></li>
    <li><a class="dropdown-item" href="../articles/prompt-design.html">Prompt design</a></li>
    <li><a class="dropdown-item" href="../articles/streaming-async.html">Streaming and async APIs</a></li>
    <li><a class="dropdown-item" href="../articles/structured-data.html">Structured data</a></li>
    <li><a class="dropdown-item" href="../articles/tool-calling.html">Tool/function calling</a></li>
  </ul></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2025/07/ellmer-0-3-0/">Version 0.3.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2025/05/ellmer-0-2-0/">Version 0.2.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/announcing-ellmer/">Version 0.1.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidyverse/ellmer/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/tidyverse/ellmer/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="development version" id="ellmer-development-version">ellmer (development version)<a class="anchor" aria-label="anchor" href="#ellmer-development-version"></a></h2>
<ul><li>
<code><a href="../reference/chat_ollama.html">models_ollama()</a></code> was fixed to correctly query model capabilities from remote Ollama servers (<a href="https://github.com/tidyverse/ellmer/issues/746" class="external-link">#746</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.2" id="ellmer-032">ellmer 0.3.2<a class="anchor" aria-label="anchor" href="#ellmer-032"></a></h2><p class="text-muted">CRAN release: 2025-09-03</p>
<ul><li>
<code><a href="../reference/chat-any.html">chat()</a></code> is now compatible with most <code>chat_</code> functions (<a href="https://github.com/tidyverse/ellmer/issues/699" class="external-link">#699</a>).
<ul><li>
<code><a href="../reference/chat_aws_bedrock.html">chat_aws_bedrock()</a></code>, <code><a href="../reference/chat_databricks.html">chat_databricks()</a></code>, <code><a href="../reference/chat_deepseek.html">chat_deepseek()</a></code>, <code><a href="../reference/chat_github.html">chat_github()</a></code>, <code><a href="../reference/chat_groq.html">chat_groq()</a></code>, <code><a href="../reference/chat_ollama.html">chat_ollama()</a></code>, <code><a href="../reference/chat_openrouter.html">chat_openrouter()</a></code>, <code><a href="../reference/chat_perplexity.html">chat_perplexity()</a></code>, and <code><a href="../reference/chat_vllm.html">chat_vllm()</a></code> now support a <code>params</code> argument that accepts common model parameters from <code><a href="../reference/params.html">params()</a></code>.</li>
<li>The <code>deployment_id</code> argument in <code><a href="../reference/chat_azure_openai.html">chat_azure_openai()</a></code> was deprecated and replaced with <code>model</code> to better align with other providers.</li>
</ul></li>
<li>
<code><a href="../reference/chat_openai.html">chat_openai()</a></code> now correctly maps <code>max_tokens</code> and <code>top_k</code> from <code><a href="../reference/params.html">params()</a></code> to the OpenAI API parameters (<a href="https://github.com/tidyverse/ellmer/issues/699" class="external-link">#699</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.1" id="ellmer-031">ellmer 0.3.1<a class="anchor" aria-label="anchor" href="#ellmer-031"></a></h2><p class="text-muted">CRAN release: 2025-08-24</p>
<ul><li><p><code><a href="../reference/chat_anthropic.html">chat_anthropic()</a></code> drops empty assistant turns to avoid API errors (<a href="https://github.com/tidyverse/ellmer/issues/710" class="external-link">#710</a>).</p></li>
<li><p><code><a href="../reference/chat_github.html">chat_github()</a></code> now uses the <code>https://models.github.ai/inference</code> endpoint and <code><a href="../reference/chat-any.html">chat()</a></code> supports GitHub models in the format <code>chat("github/openai/gpt-4.1")</code> (<a href="https://github.com/tidyverse/ellmer/issues/726" class="external-link">#726</a>).</p></li>
<li><p><code><a href="../reference/chat_google_gemini.html">chat_google_vertex()</a></code> authentication was fixed using broader scope (<a href="https://github.com/tidyverse/ellmer/issues/704" class="external-link">#704</a>, <a href="https://github.com/netique" class="external-link">@netique</a>)</p></li>
<li><p><code><a href="../reference/chat_google_gemini.html">chat_google_vertex()</a></code> can now use <code>global</code> project location (<a href="https://github.com/tidyverse/ellmer/issues/704" class="external-link">#704</a>, <a href="https://github.com/netique" class="external-link">@netique</a>)</p></li>
<li><p><code><a href="../reference/chat_openai.html">chat_openai()</a></code> now uses <code>OPENAI_BASE_URL</code>, if set, for the <code>base_url</code>. Similarly, <code><a href="../reference/chat_ollama.html">chat_ollama()</a></code> also uses <code>OLLAMA_BASE_URL</code> if set (<a href="https://github.com/tidyverse/ellmer/issues/713" class="external-link">#713</a>).</p></li>
<li><p><code><a href="../reference/contents_record.html">contents_record()</a></code> and <code><a href="../reference/contents_record.html">contents_replay()</a></code> now record and replay custom classes that extend ellmer’s <code>Turn</code> or <code>Content</code> classes (<a href="https://github.com/tidyverse/ellmer/issues/689" class="external-link">#689</a>). <code><a href="../reference/contents_record.html">contents_replay()</a></code> now also restores the tool definition in <code>ContentToolResult</code> objects (in <code>@request@tool</code>) (<a href="https://github.com/tidyverse/ellmer/issues/693" class="external-link">#693</a>).</p></li>
<li><p><code><a href="../reference/chat_snowflake.html">chat_snowflake()</a></code> now supports Privatelink accounts (<a href="https://github.com/tidyverse/ellmer/issues/694" class="external-link">#694</a>, <a href="https://github.com/robert-norberg" class="external-link">@robert-norberg</a>). and works against Snowflake’s latest API changes (<a href="https://github.com/tidyverse/ellmer/issues/692" class="external-link">#692</a>, <a href="https://github.com/robert-norberg" class="external-link">@robert-norberg</a>).</p></li>
<li><p><code><a href="../reference/chat_google_gemini.html">models_google_vertex()</a></code> works once again (<a href="https://github.com/tidyverse/ellmer/issues/704" class="external-link">#704</a>, <a href="https://github.com/netique" class="external-link">@netique</a>)</p></li>
<li><p>In the <code>value_turn()</code> method for OpenAI providers, <code>usage</code> is checked if <code>NULL</code> before logging tokens to avoid errors when streaming with some OpenAI-compatible services (<a href="https://github.com/tidyverse/ellmer/issues/706" class="external-link">#706</a>, <a href="https://github.com/stevegbrooks" class="external-link">@stevegbrooks</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.0" id="ellmer-030">ellmer 0.3.0<a class="anchor" aria-label="anchor" href="#ellmer-030"></a></h2><p class="text-muted">CRAN release: 2025-07-24</p>
<div class="section level3">
<h3 id="new-features-0-3-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-3-0"></a></h3>
<ul><li><p>New <code><a href="../reference/chat-any.html">chat()</a></code> allows you to chat with any provider using a string like <code>chat("anthropic")</code> or <code>chat("openai/gpt-4.1-nano")</code> (<a href="https://github.com/tidyverse/ellmer/issues/361" class="external-link">#361</a>).</p></li>
<li><p><code><a href="../reference/tool.html">tool()</a></code> has a simpler specification: you now specify the <code>name</code>, <code>description</code>, and <code>arguments</code>. I have done my best to deprecate old usage and give clear errors, but I have likely missed a few edge cases. I apologize for any pain that this causes, but I’m convinced that it is going to make tool usage easier and clearer in the long run. If you have many calls to convert, <code><a href="../reference/tool.html">?tool</a></code> contains a prompt that will help you use an LLM to convert them (<a href="https://github.com/tidyverse/ellmer/issues/603" class="external-link">#603</a>). It also now returns a function so that you can call it (and/or export it from your package) (<a href="https://github.com/tidyverse/ellmer/issues/602" class="external-link">#602</a>).</p></li>
<li><p><code><a href="../reference/type_boolean.html">type_array()</a></code> and <code><a href="../reference/type_boolean.html">type_enum()</a></code> now have the description as the second argument and <code>items</code>/<code>values</code> as the first. This makes them easier to use in the common case where the description isn’t necessary (<a href="https://github.com/tidyverse/ellmer/issues/610" class="external-link">#610</a>).</p></li>
<li><p>ellmer now retries requests up to 3 times, controllable with <code>option(ellmer_max_tries)</code>, and will retry if the connection fails (rather than just if the request itself returns a transient error). The default timeout, controlled by <code>option(ellmer_timeout_s)</code>, now applies to the initial connection phase. Together, these changes should make it much more likely for ellmer requests to succeed.</p></li>
<li><p>New <code><a href="../reference/parallel_chat.html">parallel_chat_text()</a></code> and <code><a href="../reference/batch_chat.html">batch_chat_text()</a></code> make it easier to just get the text response from multiple prompts (<a href="https://github.com/tidyverse/ellmer/issues/510" class="external-link">#510</a>).</p></li>
<li><p>ellmer’s cost estimates are considerably improved. <code><a href="../reference/chat_openai.html">chat_openai()</a></code>, <code><a href="../reference/chat_google_gemini.html">chat_google_gemini()</a></code>, and <code><a href="../reference/chat_anthropic.html">chat_anthropic()</a></code> capture the number of cached input tokens. This is primarily useful for OpenAI and Gemini since both offer automatic caching, yielding improved cost estimates (<a href="https://github.com/tidyverse/ellmer/issues/466" class="external-link">#466</a>). We also have a better source of pricing data, LiteLLM. This considerably expands the number of providers and models that include cost information (<a href="https://github.com/tidyverse/ellmer/issues/659" class="external-link">#659</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-and-minor-improvements-0-3-0">Bug fixes and minor improvements<a class="anchor" aria-label="anchor" href="#bug-fixes-and-minor-improvements-0-3-0"></a></h3>
<ul><li>The new <code>ellmer_echo</code> option controls the default value for <code>echo</code>.</li>
<li>
<code><a href="../reference/batch_chat.html">batch_chat_structured()</a></code> provides clear messaging when prompts/path/provider don’t match (<a href="https://github.com/tidyverse/ellmer/issues/599" class="external-link">#599</a>).</li>
<li>
<code><a href="../reference/chat_aws_bedrock.html">chat_aws_bedrock()</a></code> allows you to set the <code>base_url()</code> (<a href="https://github.com/tidyverse/ellmer/issues/441" class="external-link">#441</a>).</li>
<li>
<code><a href="../reference/chat_aws_bedrock.html">chat_aws_bedrock()</a></code>, <code><a href="../reference/chat_google_gemini.html">chat_google_gemini()</a></code>, <code><a href="../reference/chat_ollama.html">chat_ollama()</a></code>, and <code><a href="../reference/chat_vllm.html">chat_vllm()</a></code> use a more robust method to generate model URLs from the <code>base_url</code> (<a href="https://github.com/tidyverse/ellmer/issues/593" class="external-link">#593</a>, <a href="https://github.com/benyake" class="external-link">@benyake</a>).</li>
<li>
<code><a href="../reference/chat_cortex_analyst.html">chat_cortex_analyst()</a></code> is deprecated; please use <code><a href="../reference/chat_snowflake.html">chat_snowflake()</a></code> instead (<a href="https://github.com/tidyverse/ellmer/issues/640" class="external-link">#640</a>).</li>
<li>
<code><a href="../reference/chat_github.html">chat_github()</a></code> (and other OpenAI extensions) no longer warn about <code>seed</code> (<a href="https://github.com/tidyverse/ellmer/issues/574" class="external-link">#574</a>).</li>
<li>
<code><a href="../reference/chat_google_gemini.html">chat_google_gemini()</a></code> and <code><a href="../reference/chat_google_gemini.html">chat_google_vertex()</a></code> default to Gemini 2.5 flash (<a href="https://github.com/tidyverse/ellmer/issues/576" class="external-link">#576</a>).</li>
<li>
<code><a href="../reference/chat_huggingface.html">chat_huggingface()</a></code> works much better.</li>
<li>
<code><a href="../reference/chat_openai.html">chat_openai()</a></code> supports <code>content_pdf_()</code> (<a href="https://github.com/tidyverse/ellmer/issues/650" class="external-link">#650</a>).</li>
<li>
<code><a href="../reference/chat_portkey.html">chat_portkey()</a></code> works once again, and reads the virtual API key from the <code>PORTKEY_VIRTUAL_KEY</code> env var (<a href="https://github.com/tidyverse/ellmer/issues/588" class="external-link">#588</a>).</li>
<li>
<code><a href="../reference/chat_snowflake.html">chat_snowflake()</a></code> works with tool calling (<a href="https://github.com/tidyverse/ellmer/issues/557" class="external-link">#557</a>, <a href="https://github.com/atheriel" class="external-link">@atheriel</a>).</li>
<li>
<code>Chat$chat_structured()</code> and friends no longer unnecessarily wrap <code><a href="../reference/type_boolean.html">type_object()</a></code> for <code><a href="../reference/chat_openai.html">chat_openai()</a></code> (<a href="https://github.com/tidyverse/ellmer/issues/671" class="external-link">#671</a>).</li>
<li>
<code>Chat$chat_structured()</code> suppresses tool use. If you need to use tools and structured data together, first use <code>$chat()</code> for any needed tools, then <code>$chat_structured()</code> to extract the data you need.</li>
<li>
<code>Chat$chat_structured()</code> no longer requires a prompt (since it may be obvious from the context) (<a href="https://github.com/tidyverse/ellmer/issues/570" class="external-link">#570</a>).</li>
<li>
<code>Chat$register_tool()</code> shows a message when you replace an existing tool (<a href="https://github.com/tidyverse/ellmer/issues/625" class="external-link">#625</a>).</li>
<li>
<code><a href="../reference/contents_record.html">contents_record()</a></code> and <code><a href="../reference/contents_record.html">contents_replay()</a></code> record and replay <code>Turn</code> related information from a <code>Chat</code> instance (<a href="https://github.com/tidyverse/ellmer/issues/502" class="external-link">#502</a>). These methods can be used for bookmarking within {shinychat}.</li>
<li>
<code><a href="../reference/chat_github.html">models_github()</a></code> lists models for <code><a href="../reference/chat_github.html">chat_github()</a></code> (<a href="https://github.com/tidyverse/ellmer/issues/561" class="external-link">#561</a>).</li>
<li>
<code><a href="../reference/chat_ollama.html">models_ollama()</a></code> includes a <code>capabilities</code> column with a comma-separated list of model capabilities (<a href="https://github.com/tidyverse/ellmer/issues/623" class="external-link">#623</a>).</li>
<li>
<code><a href="../reference/parallel_chat.html">parallel_chat()</a></code> and friends accept lists of <code>Content</code> objects in the <code>prompt</code> (<a href="https://github.com/tidyverse/ellmer/issues/597" class="external-link">#597</a>, <a href="https://github.com/thisisnic" class="external-link">@thisisnic</a>).</li>
<li>Tool requests show converted arguments when printed (<a href="https://github.com/tidyverse/ellmer/issues/517" class="external-link">#517</a>).</li>
<li>
<code><a href="../reference/tool.html">tool()</a></code> checks that the <code>name</code> is valid (<a href="https://github.com/tidyverse/ellmer/issues/625" class="external-link">#625</a>).</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.1" id="ellmer-021">ellmer 0.2.1<a class="anchor" aria-label="anchor" href="#ellmer-021"></a></h2><p class="text-muted">CRAN release: 2025-06-03</p>
<ul><li><p>When you save a <code>Chat</code> object to disk, API keys are automatically redacted. This means that you can no longer easily resume a chat you’ve saved on disk (we’ll figure this out in a future release) but ensures that you never accidentally save your secret key in an RDS file (<a href="https://github.com/tidyverse/ellmer/issues/534" class="external-link">#534</a>).</p></li>
<li><p><code><a href="../reference/chat_anthropic.html">chat_anthropic()</a></code> now defaults to Claude Sonnet 4, and I’ve added pricing information for the latest generation of Claude models.</p></li>
<li><p><code><a href="../reference/chat_databricks.html">chat_databricks()</a></code> now picks up on Databricks workspace URLs set in the configuration file, which should improve compatibility with the Databricks CLI (<a href="https://github.com/tidyverse/ellmer/issues/521" class="external-link">#521</a>, <a href="https://github.com/atheriel" class="external-link">@atheriel</a>). It now also supports tool calling (<a href="https://github.com/tidyverse/ellmer/issues/548" class="external-link">#548</a>, <a href="https://github.com/atheriel" class="external-link">@atheriel</a>).</p></li>
<li><p><code><a href="../reference/chat_snowflake.html">chat_snowflake()</a></code> no longer streams answers that include a mysterious <code>list(type = "text", text = "")</code> trailer (<a href="https://github.com/tidyverse/ellmer/issues/533" class="external-link">#533</a>, <a href="https://github.com/atheriel" class="external-link">@atheriel</a>). It now parses streaming outputs correctly into turns (<a href="https://github.com/tidyverse/ellmer/issues/542" class="external-link">#542</a>), supports structured ouputs (<a href="https://github.com/tidyverse/ellmer/issues/544" class="external-link">#544</a>), and standard model parameters (<a href="https://github.com/tidyverse/ellmer/issues/545" class="external-link">#545</a>, <a href="https://github.com/atheriel" class="external-link">@atheriel</a>).</p></li>
<li><p><code><a href="../reference/chat_snowflake.html">chat_snowflake()</a></code> and <code><a href="../reference/chat_databricks.html">chat_databricks()</a></code> now default to Claude Sonnet 3.7, the same default as <code><a href="../reference/chat_anthropic.html">chat_anthropic()</a></code> (<a href="https://github.com/tidyverse/ellmer/issues/539" class="external-link">#539</a> and <a href="https://github.com/tidyverse/ellmer/issues/546" class="external-link">#546</a>, <a href="https://github.com/atheriel" class="external-link">@atheriel</a>).</p></li>
<li><p><code><a href="../reference/type_boolean.html">type_from_schema()</a></code> lets you to use pre-existing JSON schemas in structured chats (<a href="https://github.com/tidyverse/ellmer/issues/133" class="external-link">#133</a>, <a href="https://github.com/hafen" class="external-link">@hafen</a>)</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.0" id="ellmer-020">ellmer 0.2.0<a class="anchor" aria-label="anchor" href="#ellmer-020"></a></h2><p class="text-muted">CRAN release: 2025-05-17</p>
<div class="section level3">
<h3 id="breaking-changes-0-2-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-2-0"></a></h3>
<ul><li>
<p>We have made a number of refinements to the way ellmer converts JSON to R data structures. These are breaking changes, although we don’t expect them to affect much code in the wild. Most importantly, tools are now invoked with their inputs coerced to standard R data structures (<a href="https://github.com/tidyverse/ellmer/issues/461" class="external-link">#461</a>); opt-out by setting <code>convert = FALSE</code> in <code><a href="../reference/tool.html">tool()</a></code>.</p>
<p>Additionally ellmer now converts <code>NULL</code> to <code>NA</code> for <code><a href="../reference/type_boolean.html">type_boolean()</a></code>, <code><a href="../reference/type_boolean.html">type_integer()</a></code>, <code><a href="../reference/type_boolean.html">type_number()</a></code>, and <code><a href="../reference/type_boolean.html">type_string()</a></code> (<a href="https://github.com/tidyverse/ellmer/issues/445" class="external-link">#445</a>), and does a better job with arrays when <code>required = FALSE</code> (<a href="https://github.com/tidyverse/ellmer/issues/384" class="external-link">#384</a>).</p>
</li>
<li><p><code>chat_</code> functions no longer have a <code>turn</code> argument. If you need to set the turns, you can now use <code>Chat$set_turns()</code> (<a href="https://github.com/tidyverse/ellmer/issues/427" class="external-link">#427</a>). Additionally, <code>Chat$tokens()</code> has been renamed to <code>Chat$get_tokens()</code> and returns a data frame of tokens, correctly aligned to the individual turn. The print method now uses this to show how many input/output tokens were used by each turn (<a href="https://github.com/tidyverse/ellmer/issues/354" class="external-link">#354</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-2-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-2-0"></a></h3>
<ul><li>
<p>Two new interfaces help you do multiple chats with a single function call:</p>
<ul><li><p><code><a href="../reference/batch_chat.html">batch_chat()</a></code> and <code><a href="../reference/batch_chat.html">batch_chat_structured()</a></code> allow you to submit multiple chats to OpenAI and Anthropic’s batched interfaces. These only guarantee a response within 24 hours, but are 50% of the price of regular requests (<a href="https://github.com/tidyverse/ellmer/issues/143" class="external-link">#143</a>).</p></li>
<li><p><code><a href="../reference/parallel_chat.html">parallel_chat()</a></code> and <code><a href="../reference/parallel_chat.html">parallel_chat_structured()</a></code> work with any provider and allow you to submit multiple chats in parallel (<a href="https://github.com/tidyverse/ellmer/issues/143" class="external-link">#143</a>). This doesn’t give you any cost savings, but it’s can be much, much faster.</p></li>
</ul><p>This new family of functions is experimental because I’m not 100% sure that the shape of the user interface is correct, particularly as it pertains to handling errors.</p>
</li>
<li><p><code><a href="../reference/google_upload.html">google_upload()</a></code> lets you upload files to Google Gemini or Vertex AI (<a href="https://github.com/tidyverse/ellmer/issues/310" class="external-link">#310</a>). This allows you to work with videos, PDFs, and other large files with Gemini.</p></li>
<li><p><code><a href="../reference/chat_google_gemini.html">models_google_gemini()</a></code>, <code><a href="../reference/chat_anthropic.html">models_anthropic()</a></code>, <code><a href="../reference/chat_openai.html">models_openai()</a></code>, <code><a href="../reference/chat_aws_bedrock.html">models_aws_bedrock()</a></code>, <code><a href="../reference/chat_ollama.html">models_ollama()</a></code> and <code><a href="../reference/chat_vllm.html">models_vllm()</a></code>, list available models for Google Gemini, Anthropic, OpenAI, AWS Bedrock, Ollama, and VLLM respectively. Different providers return different metadata so they are only guaranteed to return a data frame with at least an <code>id</code> column (<a href="https://github.com/tidyverse/ellmer/issues/296" class="external-link">#296</a>). Where possible (currently for Gemini, Anthropic, and OpenAI) we include known token prices (per million tokens).</p></li>
<li><p><code><a href="../reference/interpolate.html">interpolate()</a></code> and friends are now vectorised so you can generate multiple prompts for (e.g.) a data frame of inputs. They also now return a specially classed object with a custom print method (<a href="https://github.com/tidyverse/ellmer/issues/445" class="external-link">#445</a>). New <code><a href="../reference/interpolate.html">interpolate_package()</a></code> makes it easier to interpolate from prompts stored in the <code>inst/prompts</code> directory inside a package (<a href="https://github.com/tidyverse/ellmer/issues/164" class="external-link">#164</a>).</p></li>
<li><p><code><a href="../reference/chat_anthropic.html">chat_anthropic()</a></code>, <code><a href="../reference/deprecated.html">chat_azure()</a></code>, <code><a href="../reference/chat_openai.html">chat_openai()</a></code>, and <code><a href="../reference/deprecated.html">chat_gemini()</a></code> now take a <code>params</code> argument, that coupled with the <code><a href="../reference/params.html">params()</a></code> helper, makes it easy to specify common model parameters (like <code>seed</code> and <code>temperature</code>) across providers. Support for other providers will grow as you request it (<a href="https://github.com/tidyverse/ellmer/issues/280" class="external-link">#280</a>).</p></li>
<li><p>ellmer now tracks the cost of input and output tokens. The cost is displayed when you print a <code>Chat</code> object, in <code>tokens_usage()</code>, and with <code>Chat$get_cost()</code>. You can also request costs in <code><a href="../reference/parallel_chat.html">parallel_chat_structured()</a></code>. We do our best to accurately compute the cost, but you should treat it as an estimate rather than the exact price. Unfortunately LLM providers currently make it very difficult to figure out exactly how much your queries cost (<a href="https://github.com/tidyverse/ellmer/issues/203" class="external-link">#203</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="provider-updates-0-2-0">Provider updates<a class="anchor" aria-label="anchor" href="#provider-updates-0-2-0"></a></h3>
<ul><li>
<p>We have support for three new providers:</p>
<ul><li>
<code><a href="../reference/chat_huggingface.html">chat_huggingface()</a></code> for models hosted at <a href="https://huggingface.co" class="external-link uri">https://huggingface.co</a> (<a href="https://github.com/tidyverse/ellmer/issues/359" class="external-link">#359</a>, <a href="https://github.com/s-spavound" class="external-link">@s-spavound</a>).</li>
<li>
<code><a href="../reference/chat_mistral.html">chat_mistral()</a></code> for models hosted at <a href="https://mistral.ai" class="external-link uri">https://mistral.ai</a> (<a href="https://github.com/tidyverse/ellmer/issues/319" class="external-link">#319</a>).</li>
<li>
<code><a href="../reference/chat_portkey.html">chat_portkey()</a></code> and <code><a href="../reference/chat_portkey.html">models_portkey()</a></code> for models hosted at <a href="https://portkey.ai" class="external-link uri">https://portkey.ai</a> (<a href="https://github.com/tidyverse/ellmer/issues/363" class="external-link">#363</a>, <a href="https://github.com/maciekbanas" class="external-link">@maciekbanas</a>).</li>
</ul></li>
<li>
<p>We also renamed (with deprecation) a few functions to make the naming scheme more consistent (<a href="https://github.com/tidyverse/ellmer/issues/382" class="external-link">#382</a>, <a href="https://github.com/gadenbuie" class="external-link">@gadenbuie</a>):</p>
<ul><li>
<code><a href="../reference/chat_azure_openai.html">chat_azure_openai()</a></code> replaces <code><a href="../reference/deprecated.html">chat_azure()</a></code>.</li>
<li>
<code><a href="../reference/chat_aws_bedrock.html">chat_aws_bedrock()</a></code> replaces <code><a href="../reference/deprecated.html">chat_bedrock()</a></code>.</li>
<li>
<code><a href="../reference/chat_anthropic.html">chat_anthropic()</a></code> replaces <code><a href="../reference/chat_anthropic.html">chat_anthropic()</a></code>.</li>
<li>
<code><a href="../reference/chat_google_gemini.html">chat_google_gemini()</a></code> replaces <code><a href="../reference/deprecated.html">chat_gemini()</a></code>.</li>
</ul></li>
<li>
<p>We have updated the default model for a couple of providers:</p>
<ul><li>
<code><a href="../reference/chat_anthropic.html">chat_anthropic()</a></code> uses Sonnet 3.7 (which it also now displays) (<a href="https://github.com/tidyverse/ellmer/issues/336" class="external-link">#336</a>).</li>
<li>
<code><a href="../reference/chat_openai.html">chat_openai()</a></code> uses GPT-4.1 (<a href="https://github.com/tidyverse/ellmer/issues/512" class="external-link">#512</a>)</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="developer-tooling-0-2-0">Developer tooling<a class="anchor" aria-label="anchor" href="#developer-tooling-0-2-0"></a></h3>
<ul><li><p>New <code>Chat$get_provider()</code> lets you access the underlying provider object (<a href="https://github.com/tidyverse/ellmer/issues/202" class="external-link">#202</a>).</p></li>
<li><p><code>Chat$chat_async()</code> and <code>Chat$stream_async()</code> gain a <code>tool_mode</code> argument to decide between <code>"sequential"</code> and <code>"concurrent"</code> tool calling. This is an advanced feature that primarily affects asynchronous tools (<a href="https://github.com/tidyverse/ellmer/issues/488" class="external-link">#488</a>, <a href="https://github.com/gadenbuie" class="external-link">@gadenbuie</a>).</p></li>
<li><p><code>Chat$stream()</code> and <code>Chat$stream_async()</code> gain support for streaming the additional content types generated during a tool call with a new <code>stream</code> argument. When <code>stream = "content"</code> is set, the streaming response yields <code>Content</code> objects, including the <code>ContentToolRequest</code> and <code>ContentToolResult</code> objects used to request and return tool calls (<a href="https://github.com/tidyverse/ellmer/issues/400" class="external-link">#400</a>, <a href="https://github.com/gadenbuie" class="external-link">@gadenbuie</a>).</p></li>
<li><p>New <code>Chat$on_tool_request()</code> and <code>$on_tool_result()</code> methods allow you to register callbacks to run on a tool request or tool result. These callbacks can be used to implement custom logging or other actions when tools are called, without modifying the tool function (<a href="https://github.com/tidyverse/ellmer/issues/493" class="external-link">#493</a>, <a href="https://github.com/gadenbuie" class="external-link">@gadenbuie</a>).</p></li>
<li><p><code>Chat$chat(echo = "output")</code> replaces the now-deprecated <code>echo = "text"</code> option. When using <code>echo = "output"</code>, additional output, such as tool requests and results, are shown as they occur. When <code>echo = "none"</code>, tool call failures are emitted as warnings (<a href="https://github.com/tidyverse/ellmer/issues/366" class="external-link">#366</a>, <a href="https://github.com/gadenbuie" class="external-link">@gadenbuie</a>).</p></li>
<li>
<p><code>ContentToolResult</code> objects can now be returned directly from the <code><a href="../reference/tool.html">tool()</a></code> function and now includes additional information (<a href="https://github.com/tidyverse/ellmer/issues/398" class="external-link">#398</a> <a href="https://github.com/tidyverse/ellmer/issues/399" class="external-link">#399</a>, <a href="https://github.com/gadenbuie" class="external-link">@gadenbuie</a>):</p>
<ul><li>
<code>extra</code>: A list of additional data associated with the tool result that is not shown to the chatbot.</li>
<li>
<code>request</code>: The <code>ContentToolRequest</code> that triggered the tool call. <code>ContentToolResult</code> no longer has an <code>id</code> property, instead the tool call ID can be retrieved from <code>request@id</code>.</li>
</ul><p>They also include the error condition in the <code>error</code> property when a tool call fails (<a href="https://github.com/tidyverse/ellmer/issues/421" class="external-link">#421</a>, <a href="https://github.com/gadenbuie" class="external-link">@gadenbuie</a>).</p>
</li>
<li><p><code>ContentToolRequest</code> gains a <code>tool</code> property that includes the <code><a href="../reference/tool.html">tool()</a></code> definition when a request is matched to a tool by ellmer (<a href="https://github.com/tidyverse/ellmer/issues/423" class="external-link">#423</a>, <a href="https://github.com/gadenbuie" class="external-link">@gadenbuie</a>).</p></li>
<li><p><code><a href="../reference/tool.html">tool()</a></code> gains an <code>.annotations</code> argument that can be created with the <code><a href="../reference/tool_annotations.html">tool_annotations()</a></code> helper. Tool annotations are described in the <a href="https://modelcontextprotocol.io/introduction" class="external-link">Model Context Protocol</a> and can be used to describe the tool to clients. (<a href="https://github.com/tidyverse/ellmer/issues/402" class="external-link">#402</a>, <a href="https://github.com/gadenbuie" class="external-link">@gadenbuie</a>)</p></li>
<li><p>New <code><a href="../reference/tool_reject.html">tool_reject()</a></code> function can be used to reject a tool request with an explanation for the rejection reason. <code><a href="../reference/tool_reject.html">tool_reject()</a></code> can be called within a tool function or in a <code>Chat$on_tool_request()</code> callback. In the latter case, rejecting a tool call will ensure that the tool function is not evaluated (<a href="https://github.com/tidyverse/ellmer/issues/490" class="external-link">#490</a>, <a href="https://github.com/tidyverse/ellmer/issues/493" class="external-link">#493</a>, <a href="https://github.com/gadenbuie" class="external-link">@gadenbuie</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-0-2-0">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-0-2-0"></a></h3>
<ul><li><p>All requests now set a custom User-Agent that identifies that the requests come from ellmer (<a href="https://github.com/tidyverse/ellmer/issues/341" class="external-link">#341</a>). The default timeout has been increased to 5 minutes (<a href="https://github.com/tidyverse/ellmer/issues/451" class="external-link">#451</a>, <a href="https://github.com/tidyverse/ellmer/issues/321" class="external-link">#321</a>).</p></li>
<li><p><code><a href="../reference/chat_anthropic.html">chat_anthropic()</a></code> now supports the thinking content type (<a href="https://github.com/tidyverse/ellmer/issues/396" class="external-link">#396</a>), and <code><a href="../reference/content_image_url.html">content_image_url()</a></code> (<a href="https://github.com/tidyverse/ellmer/issues/347" class="external-link">#347</a>). It gains a <code>beta_header</code> argument to opt-in to beta features (<a href="https://github.com/tidyverse/ellmer/issues/339" class="external-link">#339</a>). It (along with <code><a href="../reference/deprecated.html">chat_bedrock()</a></code>) no longer chokes after receiving an output that consists only of whitespace (<a href="https://github.com/tidyverse/ellmer/issues/376" class="external-link">#376</a>). Finally, <code>chat_anthropic(max_tokens =)</code> is now deprecated in favour of <code>chat_anthropic(params = )</code> (<a href="https://github.com/tidyverse/ellmer/issues/280" class="external-link">#280</a>).</p></li>
<li><p><code><a href="../reference/chat_google_gemini.html">chat_google_gemini()</a></code> and <code><a href="../reference/chat_google_gemini.html">chat_google_vertex()</a></code> gain more ways to authenticate. They can use <code>GEMINI_API_KEY</code> if set (<a href="https://github.com/t-kalinowski" class="external-link">@t-kalinowski</a>, <a href="https://github.com/tidyverse/ellmer/issues/513" class="external-link">#513</a>), authenticate with Google default application credentials (including service accounts, etc) (<a href="https://github.com/tidyverse/ellmer/issues/317" class="external-link">#317</a>, <a href="https://github.com/atheriel" class="external-link">@atheriel</a>) and use viewer-based credentials when running on Posit Connect (<a href="https://github.com/tidyverse/ellmer/issues/320" class="external-link">#320</a>, <a href="https://github.com/atheriel" class="external-link">@atheriel</a>). Authentication with default application credentials requires the {gargle} package. They now also can now handle responses that include citation metadata (<a href="https://github.com/tidyverse/ellmer/issues/358" class="external-link">#358</a>).</p></li>
<li><p><code><a href="../reference/chat_ollama.html">chat_ollama()</a></code> now works with <code><a href="../reference/tool.html">tool()</a></code> definitions with optional arguments or empty properties (<a href="https://github.com/tidyverse/ellmer/issues/342" class="external-link">#342</a>, <a href="https://github.com/tidyverse/ellmer/issues/348" class="external-link">#348</a>, <a href="https://github.com/gadenbuie" class="external-link">@gadenbuie</a>), and now accepts <code>api_key</code> and consults the <code>OLLAMA_API_KEY</code> environment variable. This is not needed for local usage, but enables bearer-token authentication when Ollama is running behind a reverse proxy (<a href="https://github.com/tidyverse/ellmer/issues/501" class="external-link">#501</a>, <a href="https://github.com/gadenbuie" class="external-link">@gadenbuie</a>).</p></li>
<li><p><code>chat_openai(seed =)</code> is now deprecated in favour of <code>chat_openai(params = )</code> (<a href="https://github.com/tidyverse/ellmer/issues/280" class="external-link">#280</a>).</p></li>
<li><p><code><a href="../reference/create_tool_def.html">create_tool_def()</a></code> can now use any Chat instance (<a href="https://github.com/tidyverse/ellmer/issues/118" class="external-link">#118</a>, <a href="https://github.com/pedrobtz" class="external-link">@pedrobtz</a>).</p></li>
<li><p><code><a href="../reference/live_console.html">live_browser()</a></code> now requires {shinychat} v0.2.0 or later which provides access to the app that powers <code><a href="../reference/live_console.html">live_browser()</a></code> via <code><a href="https://rdrr.io/pkg/shinychat/man/chat_app.html" class="external-link">shinychat::chat_app()</a></code>, as well as a Shiny module for easily including a chat interface for an ellmer <code>Chat</code> object in your Shiny apps (<a href="https://github.com/tidyverse/ellmer/issues/397" class="external-link">#397</a>, <a href="https://github.com/gadenbuie" class="external-link">@gadenbuie</a>). It now initializes the UI with the messages from the chat turns, rather than replaying the turns server-side (<a href="https://github.com/tidyverse/ellmer/issues/381" class="external-link">#381</a>).</p></li>
<li><p><code>Provider</code> gains <code>name</code> and <code>model</code> fields (<a href="https://github.com/tidyverse/ellmer/issues/406" class="external-link">#406</a>). These are now reported when you print a chat object and are used in <code><a href="../reference/token_usage.html">token_usage()</a></code>.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.1" id="ellmer-011">ellmer 0.1.1<a class="anchor" aria-label="anchor" href="#ellmer-011"></a></h2><p class="text-muted">CRAN release: 2025-02-06</p>
<div class="section level3">
<h3 id="lifecycle-changes-0-1-1">Lifecycle changes<a class="anchor" aria-label="anchor" href="#lifecycle-changes-0-1-1"></a></h3>
<ul><li><p><code>option(ellmer_verbosity)</code> is no longer supported; instead use the standard httr2 verbosity functions, such as <code><a href="https://httr2.r-lib.org/reference/with_verbosity.html" class="external-link">httr2::with_verbosity()</a></code>; these now support streaming data.</p></li>
<li><p><code><a href="../reference/deprecated.html">chat_cortex()</a></code> has been renamed <code><a href="../reference/chat_cortex_analyst.html">chat_cortex_analyst()</a></code> to better disambiguate it from <code><a href="../reference/chat_snowflake.html">chat_snowflake()</a></code> (which <em>also</em> uses “Cortex”) (<a href="https://github.com/tidyverse/ellmer/issues/275" class="external-link">#275</a>, <a href="https://github.com/atheriel" class="external-link">@atheriel</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-1-1">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-1"></a></h3>
<ul><li><p>All providers now wait for up to 60s to get the complete response. You can increase this with, e.g., <code>option(ellmer_timeout_s = 120)</code> (<a href="https://github.com/tidyverse/ellmer/issues/213" class="external-link">#213</a>, <a href="https://github.com/tidyverse/ellmer/issues/300" class="external-link">#300</a>).</p></li>
<li><p><code><a href="../reference/deprecated.html">chat_azure()</a></code>, <code><a href="../reference/chat_databricks.html">chat_databricks()</a></code>, <code><a href="../reference/chat_snowflake.html">chat_snowflake()</a></code>, and <code><a href="../reference/chat_cortex_analyst.html">chat_cortex_analyst()</a></code> now detect viewer-based credentials when running on Posit Connect (<a href="https://github.com/tidyverse/ellmer/issues/285" class="external-link">#285</a>, <a href="https://github.com/atheriel" class="external-link">@atheriel</a>).</p></li>
<li><p><code><a href="../reference/chat_deepseek.html">chat_deepseek()</a></code> provides support for DeepSeek models (<a href="https://github.com/tidyverse/ellmer/issues/242" class="external-link">#242</a>).</p></li>
<li><p><code><a href="../reference/chat_openrouter.html">chat_openrouter()</a></code> provides support for models hosted by OpenRouter (<a href="https://github.com/tidyverse/ellmer/issues/212" class="external-link">#212</a>).</p></li>
<li><p><code><a href="../reference/chat_snowflake.html">chat_snowflake()</a></code> allows chatting with models hosted through Snowflake’s <a href="https://docs.snowflake.com/en/user-guide/snowflake-cortex/cortex-llm-rest-api" class="external-link">Cortex LLM REST API</a> (<a href="https://github.com/tidyverse/ellmer/issues/258" class="external-link">#258</a>, <a href="https://github.com/atheriel" class="external-link">@atheriel</a>).</p></li>
<li><p><code><a href="../reference/content_pdf_file.html">content_pdf_file()</a></code> and <code><a href="../reference/content_pdf_file.html">content_pdf_url()</a></code> allow you to upload PDFs to supported models. Models that currently support PDFs are Google Gemini and Claude Anthropic. With help from <a href="https://github.com/walkerke" class="external-link">@walkerke</a> and <a href="https://github.com/andrie" class="external-link">@andrie</a> (<a href="https://github.com/tidyverse/ellmer/issues/265" class="external-link">#265</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-and-minor-improvements-0-1-1">Bug fixes and minor improvements<a class="anchor" aria-label="anchor" href="#bug-fixes-and-minor-improvements-0-1-1"></a></h3>
<ul><li><p><code>Chat$get_model()</code> returns the model name (<a href="https://github.com/tidyverse/ellmer/issues/299" class="external-link">#299</a>).</p></li>
<li><p><code><a href="../reference/deprecated.html">chat_azure()</a></code> has greatly improved support for Azure Entra ID. API keys are now optional and we can pick up on ambient credentials from Azure service principals or attempt to use interactive Entra ID authentication when possible. The broken-by-design <code>token</code> argument has been deprecated (it could not handle refreshing tokens properly), but a new <code>credentials</code> argument can be used for custom Entra ID support when needed instead (for instance, if you’re trying to use tokens generated by the <code>AzureAuth</code> package) (<a href="https://github.com/tidyverse/ellmer/issues/248" class="external-link">#248</a>, <a href="https://github.com/tidyverse/ellmer/issues/263" class="external-link">#263</a>, <a href="https://github.com/tidyverse/ellmer/issues/273" class="external-link">#273</a>, <a href="https://github.com/tidyverse/ellmer/issues/257" class="external-link">#257</a>, <a href="https://github.com/atheriel" class="external-link">@atheriel</a>).</p></li>
<li><p><code><a href="../reference/deprecated.html">chat_azure()</a></code> now reports better error messages when the underlying HTTP requests fail (<a href="https://github.com/tidyverse/ellmer/issues/269" class="external-link">#269</a>, <a href="https://github.com/atheriel" class="external-link">@atheriel</a>). It now also defaults to <code>api_version = "2024-10-21"</code> which includes data for structured data extraction (<a href="https://github.com/tidyverse/ellmer/issues/271" class="external-link">#271</a>).</p></li>
<li><p><code><a href="../reference/deprecated.html">chat_bedrock()</a></code> now handles temporary IAM credentials better (<a href="https://github.com/tidyverse/ellmer/issues/261" class="external-link">#261</a>, <a href="https://github.com/atheriel" class="external-link">@atheriel</a>) and <code><a href="../reference/deprecated.html">chat_bedrock()</a></code> gains <code>api_args</code> argument (<a href="https://github.com/billsanto" class="external-link">@billsanto</a>, <a href="https://github.com/tidyverse/ellmer/issues/295" class="external-link">#295</a>).</p></li>
<li><p><code><a href="../reference/chat_databricks.html">chat_databricks()</a></code> now handles the <code>DATABRICKS_HOST</code> environment variable correctly whether it includes an HTTPS prefix or not (<a href="https://github.com/tidyverse/ellmer/issues/252" class="external-link">#252</a>, <a href="https://github.com/atheriel" class="external-link">@atheriel</a>). It also respects the <code>SPARK_CONNECT_USER_AGENT</code> environment variable when making requests (<a href="https://github.com/tidyverse/ellmer/issues/254" class="external-link">#254</a>, <a href="https://github.com/atheriel" class="external-link">@atheriel</a>).</p></li>
<li><p><code><a href="../reference/deprecated.html">chat_gemini()</a></code> now defaults to using the gemini-2.0-flash model.</p></li>
<li><p><code>print(Chat)</code> no longer wraps long lines, making it easier to read code and bulleted lists (<a href="https://github.com/tidyverse/ellmer/issues/246" class="external-link">#246</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0" id="ellmer-010">ellmer 0.1.0<a class="anchor" aria-label="anchor" href="#ellmer-010"></a></h2><p class="text-muted">CRAN release: 2025-01-09</p>
<ul><li><p>New <code><a href="../reference/chat_vllm.html">chat_vllm()</a></code> to chat with models served by vLLM (<a href="https://github.com/tidyverse/ellmer/issues/140" class="external-link">#140</a>).</p></li>
<li><p>The default <code><a href="../reference/chat_openai.html">chat_openai()</a></code> model is now GPT-4o.</p></li>
<li><p>New <code>Chat$set_turns()</code> to set turns. <code>Chat$turns()</code> is now <code>Chat$get_turns()</code>. <code>Chat$system_prompt()</code> is replaced with <code>Chat$set_system_prompt()</code> and <code>Chat$get_system_prompt()</code>.</p></li>
<li><p>Async and streaming async chat are now event-driven and use <code><a href="https://later.r-lib.org/reference/later_fd.html" class="external-link">later::later_fd()</a></code> to wait efficiently on curl socket activity (<a href="https://github.com/tidyverse/ellmer/issues/157" class="external-link">#157</a>).</p></li>
<li><p>New <code><a href="../reference/deprecated.html">chat_bedrock()</a></code> to chat with AWS bedrock models (<a href="https://github.com/tidyverse/ellmer/issues/50" class="external-link">#50</a>).</p></li>
<li><p>New <code>chat$extract_data()</code> uses the structured data API where available (and tool calling otherwise) to extract data structured according to a known type specification. You can create specs with functions <code><a href="../reference/type_boolean.html">type_boolean()</a></code>, <code><a href="../reference/type_boolean.html">type_integer()</a></code>, <code><a href="../reference/type_boolean.html">type_number()</a></code>, <code><a href="../reference/type_boolean.html">type_string()</a></code>, <code><a href="../reference/type_boolean.html">type_enum()</a></code>, <code><a href="../reference/type_boolean.html">type_array()</a></code>, and <code><a href="../reference/type_boolean.html">type_object()</a></code> (<a href="https://github.com/tidyverse/ellmer/issues/31" class="external-link">#31</a>).</p></li>
<li><p>The general <code>ToolArg()</code> has been replaced by the more specific <code>type_*()</code> functions. <code><a href="../reference/tool.html">ToolDef()</a></code> has been renamed to <code>tool</code>.</p></li>
<li><p><code><a href="../reference/content_image_url.html">content_image_url()</a></code> will now create inline images when given a data url (<a href="https://github.com/tidyverse/ellmer/issues/110" class="external-link">#110</a>).</p></li>
<li><p>Streaming ollama results works once again (<a href="https://github.com/tidyverse/ellmer/issues/117" class="external-link">#117</a>).</p></li>
<li><p>Streaming OpenAI results now capture more results, including <code>logprobs</code> (<a href="https://github.com/tidyverse/ellmer/issues/115" class="external-link">#115</a>).</p></li>
<li><p>New <code><a href="../reference/interpolate.html">interpolate()</a></code> and <code>prompt_file()</code> make it easier to create prompts that are a mix of static text and dynamic values.</p></li>
<li><p>You can find how many tokens you’ve used in the current session by calling <code><a href="../reference/token_usage.html">token_usage()</a></code>.</p></li>
<li><p><code>chat_browser()</code> and <code>chat_console()</code> are now <code><a href="../reference/live_console.html">live_browser()</a></code> and <code><a href="../reference/live_console.html">live_console()</a></code>.</p></li>
<li><p>The <code>echo</code> can now be one of three values: “none”, “text”, or “all”. If “all”, you’ll now see both user and assistant turns, and all content types will be printed, not just text. When running in the global environment, <code>echo</code> defaults to “text”, and when running inside a function it defaults to “none”.</p></li>
<li><p>You can now log low-level JSON request/response info by setting <code>options(ellmer_verbosity = 2)</code>.</p></li>
<li><p><code>chat$register_tool()</code> now takes an object created by <code>Tool()</code>. This makes it a little easier to reuse tool definitions (<a href="https://github.com/tidyverse/ellmer/issues/32" class="external-link">#32</a>).</p></li>
<li><p><code>new_chat_openai()</code> is now <code><a href="../reference/chat_openai.html">chat_openai()</a></code>.</p></li>
<li><p>Claude and Gemini are now supported via <code><a href="../reference/deprecated.html">chat_claude()</a></code> and <code><a href="../reference/deprecated.html">chat_gemini()</a></code>.</p></li>
<li><p>The Snowflake Cortex Analyst is now supported via <code><a href="../reference/deprecated.html">chat_cortex()</a></code> (<a href="https://github.com/tidyverse/ellmer/issues/56" class="external-link">#56</a>).</p></li>
<li><p>Databricks is now supported via <code><a href="../reference/chat_databricks.html">chat_databricks()</a></code> (<a href="https://github.com/tidyverse/ellmer/issues/152" class="external-link">#152</a>).</p></li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, Joe Cheng, Aaron Jacobs, <a href="https://garrickadenbuie.com" class="external-link">Garrick Aden-Buie</a>, <a href="http://schloerke.com" class="external-link">Barret Schloerke</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer></body></html>

